---
name: 数据域修改技能
description: 用于补充和修改数据域梳理文档，包含业务流程、业务过程、关键事实表、维度、指标、总线矩阵的完整修改能力
version: 1.0
author: Agent Skill
---

# 数据域修改技能	

## 概述	

此技能专门用于修改和补充数据域梳理文档，确保数据域文档与实际业务流程保持一致。	

## 适用场景	

当用户提出以下类型的请求时，应使用此技能：	
1. "帮我修正XX域的业务流程"	
2. "根据新的流程信息更新数据域文档"	
3. "补充XX域的逆向物流流程"	
4. "调整XX域的维度和指标"	

---

## 执行前置条件	

### 1. 获取修改依据	

修改依据可来自以下来源（按优先级）：	
1. **用户当前提供的信息**（优先级最高）	
2. 计划书（如有）：`output_LLM/计划书/` 目录下的相关计划书	
3. 权威资料：`权威资料/1.1 数据域定义表.md`	

### 2. 获取当前文档	

目标文档位置：	
```
output_LLM/数据域详情/数据域完整梳理_v2.0/
```

---

## 核心修改流程	

### 步骤 1：版本管理	

> [!IMPORTANT]
> **必须严格执行版本管理**	
> 1. 复制原文件为新版本（修改大版本或小版本号）	
> 2. 将原文件移动到 `过期文件/` 目录	
> 3. 在新文件中进行修改	

### 步骤 2：更新元数据	

更新文档头部的元数据：	
```markdown
> **数据域**: XX域 (xxx)	
> **优先级**: PX（XX域）	
> **版本**: vX.X  ← 更新版本号
> **创建日期**: YYYY-MM-DD	
> **更新日期**: YYYY-MM-DD  ← 更新日期
> **负责人**: XXX	
> **分析部门**: XXX	
```

### 步骤 3：修改域定义与业务全景	

#### 3.1 检查域定义	
确保域定义准确描述该域的职责范围。	

#### 3.2 更新业务范围	
使用树形结构展示业务范围，格式：	
```
域核心：XXX
├── 子业务1
│   ├── 明细1.1
│   └── 明细1.2
└── 子业务2
```

#### 3.3 更新边界澄清	
使用表格明确与相关域的职责边界：	
| 业务场景 | 本域职责 | 其他域职责 |
|----------|---------|-----------|
| ... | ... | ... |

### 步骤 4：更新业务流程图	

使用 Mermaid flowchart 语法，遵循以下规范：	

```mermaid
flowchart TB
    subgraph 子流程名["📦 子流程1"]
        direction TB
        A1[节点1] --> A2[节点2]
        A2 --> A3{判断}
        A3 -->|条件1| A4[结果1]
        A3 -->|条件2| A5[结果2]
    end
    
    style A1 fill:#颜色代码
```

**颜色规范**：	
- 入库/入仓：`#c8e6c9` (绿色)	
- 出库/发货：`#bbdefb` (蓝色)	
- 质检/检验：`#fff3e0` (橙色)	
- FBA相关：`#f3e5f5` (紫色)	
- 海外仓：`#e3f2fd` (浅蓝)	

### 步骤 5：更新业务过程定义	

#### 5.1 业务流程→业务过程映射	

| 业务流程阶段 | 业务过程 | 英文名称 | 为什么是业务过程 |
|-------------|---------|----------|-----------------|
| ... | ... | ... | 说明可度量性 |

#### 5.2 业务过程详细定义（HTML表格）	

```html
<table>
    <thead>
        <tr>
            <th>序号</th>
            <th>业务过程</th>
            <th>英文名称</th>
            <th>描述</th>
            <th>事实表类型</th>
            <th>粒度声明</th>
            <th>主键组成</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>业务过程名</td>
            <td>english_name</td>
            <td>描述</td>
            <td>事务事实/累积快照/周期快照</td>
            <td>每一行代表XXX</td>
            <td>主键字段</td>
        </tr>
    </tbody>
</table>
```

### 步骤 6：更新维度设计	

#### 6.1 维度推导逻辑	

| 分析问题 | 对应维度 | 维度类型 |
|----------|---------|----------|
| 什么时候？ | 时间维度 | 公共/专属 |
| 什么商品？ | 产品维度 | 公共/专属 |

#### 6.2 维度清单	

**公共维度**：	
| 维度 | 英文名称 | 使用场景 |
|------|----------|----------|
| ✓ 时间维度 | dim_date | 所有业务过程 |

**专属维度**：	
| 编号 | 维度名称 | 英文名称 | 主键 | 说明 |
|------|----------|----------|------|------|
| DIM-XX | 维度名 | dim_xxx | xxx_key | 说明 |

### 步骤 7：更新事实表设计	

#### 7.1 事实表清单	

| 编号 | 事实表名称 | 英文表名 | 类型 | 更新频率 | 说明 |
|------|-----------|----------|------|----------|------|
| FCT-XX | 事实表名 | fct_域缩写_名称 | 事务/快照 | 日/周/月 | 说明 |

#### 7.2 度量指标	

| 指标名称 | 指标说明 | 聚合方式 | 来源事实表 |
|----------|----------|----------|-----------|
| 指标名 | 说明 | SUM/AVG/COUNT | fct_xxx |

### 步骤 8：更新总线矩阵	

#### 8.1 总线矩阵表格	

| 业务过程 | 维度1 | 维度2 | 维度3 | ... |
|----------|-------|-------|-------|-----|
| 过程1 | ✓ | ✓ | | ... |
| 过程2 | ✓ | | ✓ | ... |

#### 8.2 总线矩阵解读	

为重要维度提供解读说明。	

### 步骤 9：更新跨域关联	

| 本域事件 | 关联域 | 关联事件 | 关联方式 |
|---------|-------|----------|----------|
| 事件名 | XX域 | 事件名 | 关联字段 |

### 步骤 10：更新版本记录	

在文档末尾添加更新记录：	
| 版本 | 日期 | 更新内容 |
|------|------|----------|
| vX.X | YYYY-MM-DD | 详细描述本次更新内容 |

---

## 质量检查清单	

修改完成后，执行以下检查：	

- [ ] 版本号已更新	
- [ ] 更新日期已更新	
- [ ] 业务流程图与业务过程匹配	
- [ ] 每个业务过程都有对应的事实表	
- [ ] 维度覆盖所有分析需求	
- [ ] 总线矩阵完整（业务过程 × 维度）	
- [ ] 跨域关联准确	
- [ ] 更新记录已添加	
- [ ] 原文件已移至过期文件夹	


## 示例调用	

用户输入：	
```
帮我修正库存域的业务流程，根据新的仓库分类更新
```

预期行为：	
1. 询问用户确认修改依据（用户提供的新流程或计划书中的方案）	
2. 读取当前库存域文档	
3. 复制文件创建新版本	
4. 按本技能步骤逐项更新	
5. 执行质量检查	
6. 将原文件移至过期文件夹	
7. 输出更新后的文档	

---

## 注意事项	

> [!CAUTION]
> 修改前必须先备份原文件，严格遵循版本管理规则	

> [!IMPORTANT]
> 所有输出文件的每行末尾必须添加双空格（遵循mdtabledoc-rules）	

> [!TIP]
> 修改多个数据域时，优先修改影响程度较大的域，再修改受影响的关联域	
